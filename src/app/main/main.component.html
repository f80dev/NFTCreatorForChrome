<app-hourglass [message]="message"></app-hourglass>

<div class="mainform" *ngIf="message==''">

  <button *ngIf="sel_collection && visual!=''" mat-raised-button
          style="width:150px;margin:20px;"
          (click)="Create_NFT()">Build this NFT</button>

  <br>
  <div style="display: flex;justify-content:center;align-content: center;width: 100%;height:300px;" *ngIf="!show_scanner && visual==''">
    <app-input label="Image generator and bank" value_type="list"
               [options]="generators" [value]="sel_generator" (valueChange)="sel_generator=$event"></app-input>
    <button mat-raised-button (click)="open_generator()">Open</button>
    <button mat-raised-button *ngIf="level(2)" (click)="open_photo()">Photo</button>
    <button mat-raised-button *ngIf="level(1)" (click)="paste()">URL</button>

  </div>

  <webcam [width]="300" [height]="300" *ngIf="show_scanner"
          style="margin: 20px;"
          (click)="take_photo()" (imageCapture)="capture_image($event)"></webcam>


  <div *ngIf="visual!=''">
    <div class="vignette">
      <mat-icon style="position:absolute;left:5px;top:5px;display: block;cursor: pointer;color:black;" (click)="reset_image()">cancel</mat-icon>
      <img [src]="visual" style="height: 100%" [title]="visual">
    </div>
    <br>
    <mat-slide-toggle [checked]="self_storage">Self storage</mat-slide-toggle>

    <br><br>

    <app-input label="Name" [value]="name" value_type="text" (valueChange)="name=$event"></app-input>
    <app-input label="Quantity" [value]="quantity" value_type="number" (valueChange)="quantity=$event"></app-input>
    <br>
    <app-input label="Royalties" [value]="royalties" [min]="0" [max]="100" unity="%"
               value_type="slider" (valueChange)="royalties=$event"></app-input>

    <br>
    <button mat-icon-button class="icon-button" (click)="add_uri()">
      <mat-icon>add</mat-icon>
    </button>
    <br>
    <table style="width: 100%;max-width: 500px;display: inline-block;">
      <tr *ngFor="let uri of uris" style="width: 100%;">
        <td style="width: 80%;text-align: left;">{{uri}}</td>
        <td>
          <mat-icon (click)="update_uri(uri)">edit</mat-icon>
          <mat-icon (click)="delete_uri(uri)">cancel</mat-icon>
        </td>
      </tr>

    </table>

  </div>

  <br>
  <div *ngIf="!user.isConnected()" style="display: inline-flex;width: 100%;align-content: center;justify-content: center;">

      <app-upload-file filter="pem" title="Upload a PEM file" style="display: inline-block;width:150px;"
                       (uploaded)="upload_pem($event)">Your PEM file</app-upload-file>
    <button mat-raised-button (click)="login()" style="margin-top: -2px;">login</button>
  </div>
  <br>


  <div style="display: inline-flex;width:100%;align-items: center;justify-content: center;">
    {{user.address}}
    &nbsp;
    <button mat-icon-button class="icon-button" (click)="logout()">
      <mat-icon>logout</mat-icon>
    </button>
  </div>

  <app-input label="Collection" value_type="list"
             [value]="sel_collection" *ngIf="collections.length>0"
             [options]="collections" (valueChange)="sel_collection=$event"></app-input>


  <br>
  <div *ngIf="user.isConnected()">
    <br>
    <button mat-raised-button (click)="logout()">logout</button>


  </div>
</div>

